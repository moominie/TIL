# 04장. 프로그램의 입력과 출력은 어떻게 해야 할까?

<학습 내용> 

함수, 입력과 출력, 파일 처리 방법 등

입출력은 프로그래밍 설계와 관련이 있음

프로그래머가 프로그램을 만들기 전에 어떤 식으로 동작하게 할 것인지 설계부터 하는데 그때 가장 중요한 부분이 바로 입출력의 설계라고 할 수 있음

특정 프로그램만이 사용하는 함수를 만들 것인지 아니면 모든 프로그램이 공통으로 사용하는 함수를 만들 것인지, 더 나아가 오픈 API로 공개하여 외부 프로그램들도 사용할 수 있게 만들 것인지 등등 모든 것이 입출력과 관련이 있음





## 04-3. 파일 읽고 쓰기

### 1. 파일 생성하기

`파일 객체 = open(파일 이름, 파일 열기 모드)`

파일을 생성하기 위해 파이썬 내장 함수 open을 사용함

open 함수는 "파일 이름"과 "파일 열기 모드"를 입력값으로 받고 결괏값으로 파일 객체를 돌려줌

```python
>>> f = open("새파일.csv", 'w')
>>> f.close()
```

위 소스 코드를 실행하면 프로그램을 실행한 디렉터리에 `새파일.csv` 라는 새로운 파일이 하나 생성됨

`f.close()`는 열려 있는 파일 객체를 닫아주는 역할을 함. 프로그램을 종료할 때 파이썬 프로그램이 열려있는 파일의 객체를 자동으로 닫아주기 때문에 이 문장은 생략해도 됨. 하지만 쓰기모드로 열었던 파일을 닫지 않고 다시 사용하려고 하면 오류가 발생하기 때문에 `close()`를 사용해서 열려 있는 파일을 직접 닫아주는 것이 좋음





- 파일 열기 모드

| 파일 열기 모드 |                           설명                            |
| :------------: | :-------------------------------------------------------: |
|       r        |            읽기모드 - 파일을 읽기만 할 때 사용            |
|       w        |            쓰기모드 - 파일에 내용을 쓸 때 사용            |
|       a        | 추가모드 - 파일의 마지막에 새로운 내용을 추가시킬 때 사용 |

파일을 쓰기 모드로 열면, 해당 파일이 이미 존재할 경우 원래 있던 내용이 모두 사라지고, 해당 파일이 존재하지 않으면 새로운 파일이 생성됨





`새파일.txt`파일을 설정한 경로에 생성하고 싶을 때 `"경로/파일 이름"`을 입력함

```python
>>> f = open("/users/userName/폴더이름/새파일.txt", 'w')
>>> f.close()
```







### 2. 파일을 쓰기 모드로 열어 출력값 적기

```python
>>> f = open("새파일.txt", 'w')
>>> for i in range(1, 11):
        data = "%d번째 줄입니다." % i
        f.write(data)
>>> f.close()
```

```python
>>> for i in range(1, 11):
        data = "%d번째 줄입니다." % i
        print(data)
```

첫 번째 소스 코드는 "새파일.txt"라는 이름의 파일 객체 f를 만들고, 파일 객체 f의 write 함수를 사용해서 파일에 결괏값을 적는 방식

`"새파일.txt"`

```
1번째 줄입니다.
2번째 줄입니다.
3번째 줄입니다.
4번째 줄입니다.
5번째 줄입니다.
6번째 줄입니다.
7번째 줄입니다.
8번째 줄입니다.
9번째 줄입니다.
10번째 줄입니다.
```

두 번째 소스 코드는 지금까지 해온대로 print문을 통해 결괏값을 모니터 화면에 출력하는 방식







### 3. 프로그램의 외부에 저장된 파일을 읽는 여러 가지 방법

#### 1) readline 함수 이용하기

```python
f = open("새파일.txt", 'r')
line = f.readline()
print(line)
f.close()
1번째 줄입니다.
```

`f = open("새파일.txt", 'r')`로 파일을 읽기 모드로 연 후 `f.readline()`을 사용해서 파일의 첫 번째 줄을 읽어 출력함

실행 결과 '1번째 줄입니다.'가 출력됨





모든 줄을 읽어서 화면에 출력하고 싶다면?

```python
f = open("새파일.txt", 'r')
while True:
    line = f.readline()
    if not line: break
    print(line)
f.close()
```

`while True:` 무한 루프 안에서 `f.readline()`을 사용해 파일을 계속해서 한 줄씩 읽어들임

`readline()`은 더 이상 읽을 줄이 없을 경우 빈 문자열("")을 리턴하므로, `if not line: break`를 써서 무한 루프를 빠져나옴

이때, 한 줄씩 읽어서 출력할 때 줄 끝에 `\n` 문자가 있으므로 빈 줄도 같이 출력됨







#### 2) readlines 함수 사용하기

`readlines`함수는 파일의 모든 줄을 읽어서 각각의 줄을 요소로 갖는 리스트로 돌려줌

```python
f = open("새파일.txt", 'r')
lines = f.readlines()
for line in lines:
  print(line)
f.close()
```

lines는 "새파일.txt"의 모든 줄을 요소로 갖는 리스트가 됨

```
['1번째 줄입니다.\n',
 '2번째 줄입니다.\n',
 '3번째 줄입니다.\n',
 '4번째 줄입니다.\n',
 '5번째 줄입니다.\n',
 '6번째 줄입니다.\n',
 '7번째 줄입니다.\n',
 '8번째 줄입니다.\n',
 '9번째 줄입니다.\n',
 '10번째 줄입니다.\n']
```





**(추가) 줄 바꿈 문자(`\n`) 제거하기**

`strip` 함수를 사용하면 줄 끝의 줄 바꿈 문자(`\n`)를 제거할 수 있음

```python
f = open("새파일.txt", 'r')
lines = f.readlines()
for line in lines:
  line = line.strip()
  print(line)
f.close()
```





#### 3) read 함수 사용하기

`f.read()`는 파일의 전체 내용을 문자열로 돌려줌

```python
f = open("새파일.txt", 'r')
data = f.read()
print(data)
f.close()
```

data는 파일의 전체 내용이 됨







### 4. 파일에 새로운 내용 추가하기

쓰기 모드(`'w'`)로 이미 존재하는 파일을 열면 그 파일의 내용이 모두 사라짐

원래 있던 값을 유지하면서 단지 새로운 값만 추가해야 할 경우에는 파일을 추가 모드(`'a'`)로 열면 됨

```python
f = open("새파일.txt", 'a')
for i in range(11,21):
  data = "%d번째 줄입니다.\n" % i
  f.write(data)
f.close()
```

위의 소스 코드에서는 "새파일.txt"를 추가 모드(`'a'`)로 열고 `write`함수를 사용해서 결괏값을 기존 파일에 추가해 적음

추가 모드로 열었기 때문에 "새파일.txt"이 원래 가지고 있던 내용 바로 다음부터 결괏값을 적기 시작함

```python
f = open("새파일.txt", 'r')
data = f.read()
print(data)
f.close()
1번째 줄입니다.
2번째 줄입니다.
3번째 줄입니다.
4번째 줄입니다.
5번째 줄입니다.
6번째 줄입니다.
7번째 줄입니다.
8번째 줄입니다.
9번째 줄입니다.
10번째 줄입니다.
11번째 줄입니다.
12번째 줄입니다.
13번째 줄입니다.
14번째 줄입니다.
15번째 줄입니다.
16번째 줄입니다.
17번째 줄입니다.
18번째 줄입니다.
19번째 줄입니다.
20번째 줄입니다.
```







### 5. with문과 함께 사용하기

```python
f = open("새파일.txt", 'w')
f.write("Life is too short, you need python")
f.close()
```

지금까지 open 함수로 파일을 열고 close로 파일을 닫음

- with문을 사용하면 with 블록을 벗어나는 순간 열린 파일 객체 f가 자동으로 close되어 편리함

```python
with open("새파일.txt", 'w') as f:
  f.write("Life is too short, you need python")
```





